"use strict";var _alphaFloors=["level 1","level 2","level 3","level 3A","level 5","level 6","level 7","level 8","level 9","level 10","level 11","level 12"],_alphaFloorsCode=["01level","02level","03level","04level","05level","06level","07level","08level","09level","10level","11level","12level"],_siteNames=["KLB - Tower 5","KLB - Tower 2A","SUITE"],_roomTypes=["Adjoining Room (Operable Wall)","Panaboard","Polycom CX100 (Audio)","Polycom CX5000 (Video Conferencing)","Projector","Projector Cable Faulty","Projector Faulty","Screen Projector Faulty","SmartBoard 800","Telepresence","TV","Writing Glass Board"];Polymer({is:"semafloor-room-page",properties:{url:{type:String,value:"https://semafloor-webapp.firebaseio.com/json/room-info"},_allSiteCards:{type:Array,value:function(){return _siteNames}},_enteredSite:{type:String,value:"FERN"},_enteredFloor:{type:String,value:"Level 13"},_roomInfo:{type:Array,value:function(){return[]}},_roomsAtEnteredFloor:{type:Array,value:function(){return[]}},_infoAtEnteredRoom:{type:Array,value:function(){return[]}},_isDataReady:{type:Boolean,value:!1},_roomNotReady:{type:Boolean,value:!1},_siteReady:{type:Boolean,value:!1},_rippleToBeCancelled:{type:Number,value:3},_scrolled:{type:Boolean,value:!1},_prevYPos:{type:Number,value:-10}},ready:function(){},attached:function(){this.updateIronImageWidth()},detached:function(){},listeners:{touchmove:"_cancelRippleWhileScrolling"},_onDown:function(e){this.set("_rippleToBeCancelled",e.model.index),this.set("_prevYPos",Math.ceil(e.detail.y))},_onUp:function(e){this._scrolled&&this.set("_scrolled",!1)},_cancelRippleWhileScrolling:function(e){if(this._scrolled){var o=Polymer.dom(this.root).querySelectorAll("paper-ripple");o[this._rippleToBeCancelled].upAction()}else this._prevYPos!==e.changedTouches.screenY&&this.set("_scrolled",!0)},_onFirebaseValue:function(e){console.log("on-firebase-value"),this.set("_roomInfo",e.detail.val()),this._roomNotReady&&this._decodeRoom(this._enteredFloor.toLowerCase(),this._enteredSite),this.set("_isDataReady",!0),this.$.floorsList.fire("iron-resize"),this.$.roomsList.fire("iron-resize"),this.fire("room-info-ready")},_computeSiteIcon:function(e){return["language","trending-up","group-work"][e]},_computeSiteImage:function(e){var o=["https://c4.staticflickr.com/8/7209/6891647325_29b124ebe4_b.jpg","https://wallpaperscraft.com/image/dubai_uae_buildings_skyscrapers_night_96720_2560x1440.jpg","https://wallpaperscraft.com/image/kln_germany_bridge_weser_reflection_architecture_hdr_47748_2560x1440.jpg","https://wallpaperscraft.com/image/twin_towers_new_york_world_trade_center_skyscrapers_river_bridge_night_city_manhattan_59434_1920x1080.jpg"];return o.splice(e,1),_.sample(o)},_setSiteReady:function(e){this._setReady||this.set("_siteReady",!0)},_enterSite:function(e){if(this._siteReady&&!this._scrolled){var o=e.model.item;"KLB - Tower 5"===o?(this.set("_enteredSite",o),this.set("_floorsAtEnteredSite",_alphaFloors),this.$.floorDialog.open()):_.isEmpty(this._roomInfo)||_.isUndefined(this._roomInfo)?(this.set("_roomNotReady",!0),this.set("_enteredSite",o),this.set("_enteredFloor","SUITE"===o?"Level 1":"Level 3"),this.$.roomDialog.open()):(this.set("_enteredSite",o),this.set("_enteredFloor","SUITE"===o?"Level 1":"Level 3"),this._decodeRoom("SUITE"===o?"level 1":"level 3",o),this.$.roomDialog.open()),this.set("_siteReady",!1),this.async(function(){var e=Polymer.dom(this.$.infoDialog).querySelectorAll("paper-checkbox");if(0!==e.length)for(var o=0;o<e.length;o++)e[o].updateStyles()})}},_leaveFloor:function(e){this.$.floorDialog.close()},_enterRoom:function(e){this.set("_enteredFloor",e.model.item),this._decodeRoom(e.model.item,this._enteredSite),this.$.roomDialog.open()},_leaveRoom:function(e){this.$.roomDialog.close()},_enterInfo:function(e){this.set("_infoAtEnteredRoom",[e.model.item]),this.$.infoDialog.open(),this.async(function(){var e=parseInt(this.$.roomDialog.style.zIndex)+1;this.$.infoDialog.backdropElement.style.zIndex=e,this.$.infoDialog.notifyResize()})},_decodeRoom:function(e,o){var t=["alpha","beta","gamma"],i=t[_siteNames.indexOf(o)],l=_alphaFloorsCode[_alphaFloors.indexOf(e)];this.set("_roomsAtEnteredFloor",this._roomInfo[i][l])},_decodeTypes:function(e){var o=_.padLeft(parseInt(e,16).toString(2),12,0),t=o.split("").map(Number),i=[];return _.filter(t,function(e,o){1===e&&i.push(_roomTypes[o])}),o=null,t=null,i},_computeInfoCls:function(e){var o=_siteNames.indexOf(e),t=["language","trending-up","group-work"][o];return" info-title "+t},_isRestricted:function(e){return e?"No":"Yes"},updateIronImageWidth:function(){var e=this.getBoundingClientRect().width;this.updateStyles({"--iron-image-height":e/16*9+"px"})}});