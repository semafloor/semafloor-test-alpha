"use strict";var _rippleNames=["uname","uid","group","email","role","room","floor","time","timeout"];Polymer({is:"semafloor-profile-page",properties:{profile:{type:Object,value:function(){return{username:"John Doe",uid:"jdxhr",group:2,email:"johndoe@jmail.com",role:"normal",room:"A002",floor:"T001",tzone:"GMT +8",tout:1440}}},_invalidEmail:{type:Boolean,value:!1},_changEmail:{type:String,value:"johndoe@jmail.com"},_timezone:{type:String,value:"eight"},_scrolled:{type:Boolean,value:!1},_rippleToBeCancelled:{type:Number,value:-1},_changeDialog:{type:String,value:"El Psy Kongroo"},_changeTitle:{type:String,value:"El Psy Kongroo"},_prevYPos:{type:Number,value:-10},_message:{type:String,value:"El Psy Kongroo"},_dialogReady:{type:Boolean,value:!1}},listeners:{touchmove:"_cancelRippleWhileScrolling"},created:function(){console.time("profile-page-ready"),console.log("profile-page-created")},ready:function(){console.timeEnd("profile-page-ready"),this.fire("profile-page-ready")},attached:function(){console.timeEnd("profile-page-attached"),this.fire("profile-page-attached")},detached:function(){console.log("profile-page-detached")},_cancelRippleWhileScrolling:function(e){if(this._scrolled){var i=Polymer.dom(this.root).querySelectorAll("paper-ripple");i[this._rippleToBeCancelled].upAction()}else this._prevYPos!==e.changedTouches.screenY&&this.set("_scrolled",!0)},_onDown:function(e){for(var i=e.target;i&&"DIV"!==i.tagName;)i=i.parentElement;if(i&&i.hasAttribute("ripple")){var t=i.getAttribute("ripple");this.set("_rippleToBeCancelled",_rippleNames.indexOf(t)),this.set("_prevYPos",Math.ceil(e.detail.y))}},_onUp:function(){this._scrolled&&this.set("_scrolled",!1)},_isEmail:function(e){return"email"===e},_setDialog:function(){this._dialogReady||this.set("_dialogReady",!0)},_changeDetail:function(e){if(this._dialogReady&&!this._scrolled){for(var i=e.target;i&&"DIV"!==i.tagName;)i=i.parentElement;if(i&&i.hasAttribute("data-profile")){var t=i.getAttribute("data-profile");this.set("_changeTitle","email"===t?"Change email":"Change time zone"),this.set("_changeDialog",t),this.$.changeDialog.open()}this.set("_dialogReady",!1)}},_confirmChange:function(e){if(!this._scrolled){var i=e.target;if(i&&"PAPER-BUTTON"===i.tagName){var t="Something wrong! Please try again.";if(this.$.profileToast.opened&&this.$.profileToast.hide(),"email"===this._changeDialog){var o=this._changeEmail;o&&!this._invalidEmail&&(t="Email has been changed successfully!",this.set("profile.email",o))}else this._timezone&&(t="Time zone has been changed successfully!",this.set("profile.tzone","eight"===this._timezone?"GMT +8":"GMT +9"));this.set("_message",t),this.async(function(){this.$.profileToast.show()},350)}}}});