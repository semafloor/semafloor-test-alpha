<link rel="import" href="../polymer/polymer.html"><link rel="import" href="firebase.html"><link rel="import" href="firebase-query-behavior.html"><script>Polymer({is:"firebase-document",behaviors:[Polymer.FirebaseQueryBehavior],properties:{query:{type:Object,notify:!0,computed:"_computeQuery(location)",observer:"_queryChanged"},data:{type:Object,notify:!0}},listeners:{"firebase-value":"_onFirebaseValue"},_localDataChanged:function(e){var t=e.path.split(".");return 1===t.length?void this._updateRemoteDocument():void this._setRemoteDocumentChild(t[1],e.base[t[1]])},_onFirebaseValue:function(e){this._applyRemoteDataChange(function(){this.set("data",e.detail.val())})},_computeQuery:function(e){return e?new Firebase(e):void 0},_updateRemoteDocument:function(){this._log("Updating remote document"),this.query.update(this.dataAsObject)},_setRemoteDocumentChild:function(e,t){this.debounce("set-"+e,function(){this._log('Setting child "'+e+'" to',t),this.query.child(e).set(t)})},_removeRemoteDocumentChild:function(e){this._log('Removing child "'+e+'"'),this.query.child(e).remove()}});</script>