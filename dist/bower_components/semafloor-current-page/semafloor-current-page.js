"use strict";var _alphaFloors=["level 1","level 2","level 3","level 3A","level 5","level 6","level 7","level 8","level 9","level 10","level 11","level 12"],_alphaFloorsCode=["01level","02level","03level","04level","05level","06level","07level","08level","09level","10level","11level","12level"],_siteNames=["KLB - Tower 5","KLB - Tower 2A","SUITE"],_statusCodes=["_alphaStatus","_betaStatus","_gammaStatus"];Polymer({is:"semafloor-current-page",properties:{selectedSite:{type:String,value:"KLB - Tower 5"},selectedFloor:{type:String,value:"13level"},selectedFloorName:{type:String,value:"Level 13"},selectedRoomName:{type:String,value:"El Psy Kongroo"},_selectedPage:{type:String,value:"floor"},_floorsAtSelectedSite:{type:Array,value:function(){return _alphaFloors},computed:"_computeFloorsAtSelection(selectedSite, _currentReservations)"},_currentReservations:{type:Object,value:function(){return{}}},_url:{type:String,value:"https://semafloor-webapp.firebaseio.com/json/current-reservations"},_alphaStatus:{type:Array,value:function(){return[]},computed:"_computeFloorStatus(_currentReservations.alpha)"},_betaStatus:{type:Array,value:function(){return[]},computed:'_computeFloorStatus(_currentReservations.beta, "beta")'},_gammaStatus:{type:Array,value:function(){return[]},computed:'_computeFloorStatus(_currentReservations.gamma, "gamma")'},_roomsAtSelectedFloor:{type:Array,value:function(){return[]},computed:"_computeRoomsAtSelection(selectedSite, selectedFloor, _currentReservations)"},_infoAtSelectedRoom:{type:Array,value:function(){return[]}}},observers:["_whenSelectedSiteChanged(selectedSite)"],created:function(){console.log("semafloor-current-created"),console.time("semafloor-current-ready"),console.time("semafloor-current-attached")},ready:function(){console.timeEnd("semafloor-current-ready")},attached:function(){console.timeEnd("semafloor-current-attached")},detached:function(){console.log("semafloor-current-detached")},_onFirebaseValue:function(e){console.log("on-firebase-value"),this.set("_currentReservations",e.detail.val()),"13level"!==this.selectedFloor&&"waiting"===this._selectedPage&&this.set("_selectedPage","room"),this.$.floorsList.fire("iron-resize"),this.$.roomsList.fire("iron-resize"),this.fire("current-reservations-ready")},_computeFloorsAtSelection:function(e){return[_alphaFloors,["Level 3"],["Level 1"]][_siteNames.indexOf(e)]},_whenSelectedSiteChanged:function(e){"floor"!==this._selectedPage&&this.set("_selectedPage","floor")},_computeFloorStatus:function(e,t){if(!_.isUndefined(e)&&!_.isEmpty(e)){var o=_alphaFloorsCode;return t&&(o="beta"===t?["03level"]:["01level"]),o.map(function(t){return e[t].some(function(e){return"Vacant"===e.status})})}},_isVacantFloor:function(e,t,o){if(_.isEmpty(e)||_.isUndefined(e))return"";var r=_statusCodes[_siteNames.indexOf(t)];return this[r][o]?"":" fully-occupied"},_unveilFloor:function(e){var t=e.target;if(t&&t.hasAttribute("floor")){var o=e.model.item.toLowerCase();this.set("selectedFloor","level 3a"===o?"04level":_alphaFloorsCode[_alphaFloors.indexOf(o)]),this.set("selectedFloorName","level 3a"===o?"level 3A":o),_.isEmpty(this._currentReservations)||_.isUndefined(this._currentReservations)?this.set("_selectedPage","waiting"):this.set("_selectedPage","room")}},_backSite:function(){this.set("selectedFloor",null),this.set("selectedFloorName",null),this.set("_selectedPage","floor")},_computeRoomsAtSelection:function(e,t){if(_.isUndefined(this._currentReservations)||_.isEmpty(this._currentReservations)||_.isEmpty(t))return[];var o=["alpha","beta","gamma"][_siteNames.indexOf(e)];return this._currentReservations[o][t]},_unveilRoom:function(e){var t=e.target;t&&t.hasAttribute("room")&&(this.set("_infoAtSelectedRoom",[e.model.item]),this.set("selectedRoomName",e.model.item.name),this.set("_selectedPage","info"))},_backRoom:function(){this.set("selectedRoomName",null),this.set("_selectedPage","room")},_isVacantRoom:function(e){var t="";return"Occupied"===e?t=" fully-occupied":"Reserved"===e&&(t=" reserved"),t},_isRoomLocked:function(e){return e?"":"-open"},_isRoomLockedMsg:function(e){return e?"This room has restricted access to the public.":"This room is open to the public."},_isRoomOccupied:function(e){return"vacant"===e.toLowerCase()?"unchecked":"checked"}});