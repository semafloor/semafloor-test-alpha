<link rel="import" href="../../polymer/polymer.html"><link rel="import" href="../../iron-flex-layout/iron-flex-layout.html"><link rel="import" href="../../iron-media-query/iron-media-query.html"><link rel="import" href="../../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="import" href="../app-scroll-behaviors/app-document-scroll-behavior.html"><link rel="import" href="../app-drawer/app-drawer.html"><link rel="import" href="../app-scrim/app-scrim.html"><dom-module id="app-drawer-layout"><style>:host{display:block}:host([fullbleed]){@apply(--layout-fit)}#drawerContainer{position:fixed;overflow-y:auto;-webkit-overflow-scrolling:touch;@apply(--app-drawer-layout-drawer)}:host([narrow])>#drawerContainer{@apply(--app-drawer-layout-narrow-drawer)}#main{position:relative;height:100%}:host([narrow]) app-drawer{box-shadow:1px 0 2px 1px rgba(0,0,0,.18)}:host([narrow]) app-drawer[position=right]{box-shadow:-1px 0 2px 1px rgba(0,0,0,.18)}:host([fullbleed])>#main>::content>*{@apply(--layout-fit)}:host(:not([narrow])) ::content [drawer-toggle]{display:none}</style><template><div id="main" style$=""><content select=":not([drawer])"></content><app-scrim id="scrim" visible$="[[_isScrimVisible(narrow, opened)]]" on-tap="toggleDrawer"></app-scrim></div><app-drawer id="drawerContainer" position="[[drawerPosition]]" opened="[[_drawerOpened(narrow, opened)]]" style$="" on-iron-activate="_drawerActivate"><content id="drawer" select="[drawer]"></content></app-drawer><iron-media-query query="[[_computeMediaQuery(forceNarrow, responsiveWidth)]]" on-query-matches-changed="_onQueryMatchesChanged"></iron-media-query></template><script>Polymer({is:"app-drawer-layout",behaviors:[Polymer.IronResizableBehavior,Polymer.AppDocumentScrollBehavior],properties:{narrow:{type:Boolean,readOnly:!0,notify:!0,reflectToAttribute:!0,value:!1},forceNarrow:{type:Boolean,value:!1,observer:"_responsiveChange"},responsiveWidth:{type:String,value:"640px"},drawerWidth:{type:String,value:"256px"},opened:{type:Boolean,notify:!0,reflectToAttribute:!0,value:!1},fullbleed:{type:Boolean,reflectToAttribute:!0,value:!1},drawerPosition:{type:String,value:"left"},disableDrawerActivate:{type:Boolean,value:!1}},listeners:{tap:"_tapHandler"},attached:function(){this.fire("iron-resize"),this.shouldEnableScroll(!0,this.$.drawerContainer)},toggleDrawer:function(){this.opened=!this.opened},get drawer(){return Polymer.dom(this.$.drawer).getDistributedNodes()[0]},_tapHandler:function(e){var t=Polymer.dom(e).localTarget;t&&t.hasAttribute("drawer-toggle")&&this.toggleDrawer()},_drawerOpened:function(e,t){return!e||t},_drawerActivate:function(){!this.disableDrawerActivate&&this.narrow&&this.async(function(){this.opened=!1})},_responsiveChange:function(e){this._setNarrow(e),this.async(this.notifyResize)},_onQueryMatchesChanged:function(e){this._responsiveChange(e.detail.value)},_computeMediaQuery:function(e,t){return e?"":"(max-width: "+t+")"},_isScrimVisible:function(e,t){var r=e&&t;return this.shouldEnableDocScroll(!r),r},_computeDrawerStyle:function(e){return"width: "+e},_computeMainStyle:function(e,t){return"margin-left: "+(e?"":t)}});</script></dom-module>