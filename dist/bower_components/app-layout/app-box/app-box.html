<link rel="import" href="../../polymer/polymer.html"><link rel="import" href="../../iron-flex-layout/iron-flex-layout.html"><link rel="import" href="../app-scroll-effects/app-scroll-effects-behavior.html"><dom-module id="app-box"><style>:host{display:block;position:relative}#clip{@apply(--layout-fit);overflow:hidden;height:100%}#frontLayer{pointer-events:none;background-size:cover;min-height:100%;@apply(--app-box-front-background)}#contentContainer{position:relative;height:100%;width:100%}:host([no-transitions]),:host([no-transitions]) #frontLayer{transition:none!important}</style><template><div id="clip"><div id="frontLayer"><content select="[background]"></content></div></div><div id="contentContainer"><content id="content"></content></div></template><script>Polymer({is:"app-box",behaviors:[Polymer.AppScrollEffectsBehavior],setup:function(){if(0!==this.offsetWidth||0!==this.offsetHeight){var t=this._clampedScrollTop,e=this.noTransitions;this.noTransitions=!0,this._elementTop=this._getElementTop(),this._elementHeight=this.offsetHeight,this._scrollingRegionHeight=this.scroller===window?window.innerHeight:this.scroller.offsetHeight,this.cancelDebouncer("_resize"),this._setUpEffect(),this._updateScrollState(t),this.noTransitions=e}},_getElementTop:function(){for(var t=this,e=0;t&&t!==this.scroller;)e+=t.offsetTop,t=t.offsetParent;return e},_updateScrollState:function(t){if(this.isOnScreen()){var e=this._elementTop-t,i=1-(e+this._elementHeight)/this._scrollingRegionHeight;this._runEffects(i,t),this.fire("app-box-transform",{top:e,progress:i},{bubbles:!1})}},isOnScreen:function(){return this._elementTop<this._scrollTop+this._scrollingRegionHeight&&this._elementTop+this._elementHeight>this._scrollTop}});</script></dom-module>