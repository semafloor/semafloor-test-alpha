<link rel="import" href="../../polymer/polymer.html"><link rel="import" href="../../iron-flex-layout/iron-flex-layout.html"><link rel="import" href="../../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="import" href="../app-scroll-behaviors/app-document-scroll-behavior.html"><dom-module id="app-header-layout"><style>:host{display:block}:host([has-scrolling-region]){position:relative;height:100%}:host>::content>[underlay-content],:host>::content>app-header{position:fixed;top:0;right:0;left:0}:host([has-scrolling-region])>::content>[underlay-content],:host([has-scrolling-region])>::content>app-header{position:absolute}:host([has-scrolling-region])>#contentContainer{@apply(--layout-fit);overflow-y:auto;-webkit-overflow-scrolling:touch}#contentContainer{position:relative;overflow-y:hidden}</style><template><content id="underlayContent" select="[underlay-content]"></content><div id="contentContainer"><content select=":not(app-header):not([app-header-overlay])"></content></div><content id="header" select="app-header"></content><content select="[app-header-overlay]"></content></template><script>Polymer({is:"app-header-layout",behaviors:[Polymer.IronResizableBehavior,Polymer.AppDocumentScrollBehavior],properties:{hasScrollingRegion:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_hasScrollingRegionChanged"}},listeners:{"iron-resize":"_resize"},get header(){return Polymer.dom(this.$.header).getDistributedNodes()[0]},attached:function(){this.async(this.setup,1)},setup:function(){this._updateContentPosition(),this._updateScroller()},_getFixedNodes:function(){return Polymer.dom(this.$.header).getDistributedNodes().concat(Polymer.dom(this.$.underlayContent).getDistributedNodes())},_updateContentPosition:function(){var e=this.header;e&&(this._headerHeight=e.offsetHeight,this.$.contentContainer.style.paddingTop=this._headerHeight+"px")},_updateFixedNodesPosition:function(){var e=this.getBoundingClientRect();this._getFixedNodes().forEach(function(t){!t||t.scroller&&t.scroller!==window||(t.style.left=this.hasScrollingRegion?"":e.left+"px",t.style.width=this.hasScrollingRegion?"":e.width+"px")}.bind(this))},_hasScrollingRegionChanged:function(e){this.shouldEnableScroll(e,this.$.contentContainer),this._updateScroller()},_updateScroller:function(){if(this.isAttached){var e=this.header;e&&(e.scroller=this.hasScrollingRegion?this.$.contentContainer:window,this._updateFixedNodesPosition())}},_resize:function(){this.setup()}});</script></dom-module>